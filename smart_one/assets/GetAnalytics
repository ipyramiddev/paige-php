!function(U,M,_){var l={hasTCF2:!0,kwebstatUrl:"https://ks.invibes.com",statwebUrl:"https://s.videostep.com",uwebDomain:"https://u.videostep.com/User",sewebUrl:"https://invibes.b26net.com"},s=_.PS=_.PS||{},e=_.moduleRan=_.moduleRan||{},u=_.IntegrationTypes={Script:0,Safeframe:1,Amp:2};if(_.purposes=_.purposes||[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],_.legitimateInterests=_.legitimateInterests||[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],_.alreadyRun)console.warn("IVBS Script run twice!");else{_.alreadyRun=!0;function o(){}var t=!1;try{t=localStorage&&localStorage.InvibesDEBUG}catch(e){}function r(n){return{sendUserVideoEvent:function(e,t){e={eventType:e,additionalInfo:t,location:function(){if(_.domain)return _.domain;let t=U;try{for(;top!==t;)t.parent.location.href.length&&(t=t.parent);_.domain=t.location.host}catch(e){-1<t.document.referrer.indexOf(l.sewebUrl)?_.domain=t.location.host:_.domain=t.document.referrer}return _.domain}(),cacheb:Date.now()},null!=n.ivwdg&&(e.wdgToken=n.ivwdg),t=l.kwebstatUrl+"/Stat/PixelUve";return F.pixel(t,e)}}}var v,n,p,f,m,g,h,b,y,I,E,C,d,w,P,S,i,L,A,V,T,k,O,R,D,x,N,H,j,z,W,q,Q,G,J,Z,K,$,X,Y,ee,B=t?U.console:{info:o,error:o,log:o,warn:o,debug:o},te=(B.logWithTimestamp=function(e){B.log((new Date).getTime()+": "+e||"-")},t&&B.info("IV DEBUG ON."),_.headerHeight=_.headerHeight||0,_.footerHeight=_.footerHeight||0,new function(){var i,r=[];this.set=function(e){for(i=e;0<r.length;){var t=r.shift();"special"==t.type&&i&&_.purposes.every(Boolean)&&c.hasConsent()&&t.callback()}},this.add=function(e,t){if("purpose"==t)e();else if("purpose1"==t&&_.purposes)1==_.purposes[0]&&c.hasConsent()?e():r.push({type:"special",callback:e});else if(r.push({type:t,callback:e}),null!=i)for(;0<r.length;){var n=r.shift();"special"==n.type&&i&&_.purposes.every(Boolean)&&c.hasConsent()&&n.callback()}}}),ne={get integrationType(){return u.Script},get requestAdCategories(){return _adCategory},set requestAdCategories(e){_adCategory=e},get adContainerIds(){return null==_adContainerIds&&(_adContainerIds=[],(_adCategory&AdCategories.INFEED)==AdCategories.INFEED&&_adContainerIds.push(_infeedDiv),(_adCategory&AdCategories.NATIVE)==AdCategories.NATIVE&&_adContainerIds.push(_nativeDiv)),_adContainerIds},setAdContainerIds:function(e){_adContainerIds=e},get locationHref(){return top.window.location.href},get referrer(){return M.referrer},get windowWidth(){return top.window.innerWidth},get windowHeight(){return top.window.innerHeight},get productSetting(){return _.prod},get supportsSticky(){return!0},get supportsFullscreen(){return!0},getVerticalVisibilityPercent:function(e){if(e.forcedVisibilityPercent)return e.forcedVisibilityPercent;var e=e.getBoundingClientRect(),t=Math.max(_.headerHeight,e.top),n=Math.min(U.innerHeight-_.footerHeight,e.bottom);return e.height<1?0:Math.max(0,Math.round(100*(n-t)/e.height))},isInViewPort:function(e){if(!e)return!1;var t=_.headerHeight,n=U.innerHeight-_.footerHeight,e=e.getBoundingClientRect();return e.top>t&&e.top<n||e.bottom>t&&e.bottom<n||e.top<=t&&e.bottom>=n},parseUrlParams:function(){return F.parseQueryStringParams()},getBoundingClientRect:function(e){return e.getBoundingClientRect()},topQuerySelector:function(e,t){t(M.querySelector(e))},requestResize:function(){return null}},a=(p="ivbsTestCD",f={setCookie:le,getCookie:ue,get cookieDomain(){return void 0===n&&(n=function(){var e=location.hostname.split(".");if(1===e.length)return location.hostname;for(var t=e.length-1;0<=t;t--){var n="."+e.slice(t).join(".");if(le(p,p,1,n),ue(p)===p)return le(p,p,-1,n),n}return null}(),B.info("IVBS: cd:"+n)),n}}),ie=(m=["VsLLocal","IvbsCampIdsLocal","ivbsRCC","ivbsRCCS","ivvcap","ivbss","IvbsCampIdsLocal","ivNotCD","ivvbks","ivBlk","ivdtbrk","IvbsCD","IvbsCDS"],g=["ivbsdid"],{setValue:ve,getValue:pe,removeKey:fe,syncWithCookies:function(){["ivbsdid","IvbsCampIdsLocal"].forEach(function(e){var t;try{t=JSON.parse(a.getCookie(e))}catch(e){}var n=pe(e);t!==n&&(n?"ivbsdid"==e?a.setCookie(e,JSON.stringify({id:n}),365):a.setCookie(e,n,365):t?(t.id&&(t=t.id),ve(e,t)):fe(e))})}}),c=(L=i=0,A=function(e){if(null==e)return 0;if(!e.gdprApplies||e.hasGlobalConsent){for(var t=0;t<_.purposes.length;++t)_.purposes[t]=!0;return 2}var n=E(e),i=!0===S(e)[436];if(!1===n[436]&&!1==i)return 0;var r=I(e);if(r instanceof Array)for(var o=0;o<d&&o<r.length;o++)_.purposes[o]=!1!==r[o]&&"false"!==r[o]&&null!=r[o];else{if("object"!=typeof r||null===r)return 0;o=0;for(a in r){if(o===d)break;r.hasOwnProperty(a)&&(_.purposes[o]=!1!==r[a]&&"false"!==r[a]&&null!=r[a],o++)}}var s=w(e);if(s instanceof Array)for(o=0;o<P&&o<s.length;o++)_.legitimateInterests[o]=!1!==s[o]&&"false"!==s[o]&&null!=s[o];else if("object"==typeof s&&null!==s){var a,o=0;for(a in s){if(o===P)break;s.hasOwnProperty(a)&&(_.legitimateInterests[o]=!1!==s[a]&&"false"!==s[a]&&null!=s[a],o++)}}return null!=n&&1==n[436]||!1!=i?2:0},V=function(e){null==e||null!=(e=C(e))&&(s.gdpr_consent=e)},{setIvbsConsent:function(){i=0,b&&he()},iabConsentPromiseOnId:function(n,i){return h=n,new Promise(function(t){try{var e;i?(Ee(!(e={gdprApplies:i.GdprApplies,tcString:i.TcString,purpose:{consents:i.PurposeConsents,legitimateInterests:i.PurposeLegitimateInterests},vendor:{consents:i.VendorConsents,legitimateInterests:i.VendorLegitimateInterests}})),d=10,t(me(e))):null!=U.__tcfapi?(Ee(!1),d=10,U.__tcfapi("getTCData",2,function(e){t(me(e))},[n])):U.context&&U.context.initialConsentValue?(Ee(!(e={gdprApplies:!0,tcString:U.context.initialConsentValue,purpose:{consents:{},legitimateInterests:{}},vendor:{consents:{},legitimateInterests:{}}})),d=10,t(me(e))):U.context&&U.context.consentSharedData&&U.context.consentSharedData.consentString?(Ee(!(e={gdprApplies:!0,tcString:U.context.consentSharedData.consentString,purpose:{consents:{},legitimateInterests:{}},vendor:{consents:{},legitimateInterests:{}}})),d=10,t(me(e))):U.ivbsAmpConsentString?(Ee(!(e={gdprApplies:!0,tcString:U.ivbsAmpConsentString,purpose:{consents:{},legitimateInterests:{}},vendor:{consents:{},legitimateInterests:{}}})),d=10,t(me(e))):t(consentResponse.NOCALL)}catch(e){B.error("IVBS: "+e),t(consentResponse.NOCALL)}})},iabConsentPromise:function(){return y=null==y?new Promise(function(e){Ce(null,e)}):y},initIabConsent:Ce,updateConsent:T=function(e){var t,n;i=0<e?(n=e,!((t=i)<=(b=0))&&(n<=0||t<n)?t:n):e},setNoCookies:be,getForgetFunctionParameters:ye,normalizeString:Ie,forgetFunction:function(e,t){var n;s.dom.id&&se.sendStatwebStats(11003,s.dom.id),oe.clear(e||o),F.jsonpWithParams(l.ewebUrl+"/User/ClearCookies",{}),n=(e=t).querySelector('[id="ivUserEmail"]'),e=e.querySelector('[id="ivUserPhone"]'),(n&&n.value||e&&e.value)&&F.jsonpWithParams(l.statwebUrl+"/Stat/DeleteUserData",ye(t)),be()},hasConsent:function(){return!b&&(0===i||null==i?null:0<i)},knowsConsent:function(){return 0!==i&&null!=i},get noCookies(){return b},get consent(){return i}}),re=(_.Uid={generate:function(){let e=parseInt("zzzzzz",36);function t(){return Math.floor(Math.random()*e).toString(36)}return t()+t()}},O={cname:"ivbsdid",load:function(e){var t=ie.getValue(this.cname);if(!t){t=a.getCookie(this.cname)||"";try{var n=JSON.parse(t);return n.id?n.id:n}catch(e){}}return!t&&e.BidVersion&&e.BidVersion<=7&&(n=e,e=_.Uid.generate()+"_",0<Number(n.publisherId)&&(e+=(n.publisherId>>>0).toString(16)),t=e),t},save:function(e){ne.integrationType!=u.Amp&&e&&(ie.setValue(this.cname,e),a.setCookie(this.cname,JSON.stringify({id:e}),365))}},function(e){if(_.dom||s.dom)return _.dom||s.dom;function t(){return k||void 0}var n=(e=e||{}).persistence||O;k=n.load(e);return n.save(k),ie.syncWithCookies(),B.info("IVBS: Did="+t()),{get id(){return t()},set id(e){k=e}}}),oe=(N=null,t=[l.uwebDomain],R="ivNotCD",D=!a.getCookie(R),x=t.map(function(r){var o,n={};return n.get=function(n,e){if(!D)return B.info("IVBS: Not CD..."),void n({});var i=r+"/GetIvId",i=F.addQueryStringParam(i,"PublisherUrlId",_.videoAdContentResult.PublisherUrlId);e&&(i=F.addQueryStringParam(i,"idToSet",e)),1==_.purposes[0]&&c.hasConsent()&&F.jsonpWithParams(i,{},function(t){t.mustRetry?(B.log("IVBS: retrying..."),i=F.addQueryStringParam(i,"retry",1),F.jsonpWithParams(i,{},function(e){e.optIn=e.optIn||t.optIn,e.notCD&&(B.warn("IVBS: Set as not CD!"),D=!1,a.setCookie(R,"y",365)),o=e.id,n(e)})):(o=t.id,n(t)),t.optIn<0&&t.LId&&(ie.setValue("ivbsdid",t.LId),a.setCookie("ivbsdid",JSON.stringify({id:t.LId}),365),s.dom.id=t.LId),ie.syncWithCookies()})},n.set=function(e,t){t&&o===t?e({}):n.get(e,t)},n.clear=function(e){var t={location:encodeURIComponent(F.getDocumentLocation()),ts:(new Date).getTime()};ne.referrer&&(t.referrer=encodeURIComponent(ne.referrer.substring(0,300).split(/[?#]/)[0])),s.dom.id&&(t.lid+=s.dom.id),F.jsonpWithParams(r+"/NoIvId",t,e)},n.getOptIn=function(e){if(!D)return B.info("IVBS: Not CD..."),void e({});F.jsonpWithParams(r+"/GetOptIn",null,e)},n}),H={getId:function(n){var i=0,r=function(){var e=x[i];e?e.get(function(t){t.id?(n(t),x.forEach(function(e){e.set(o,t.id)})):(i++,r())}):n({})};r()},clear:function(e){function t(){0===--n&&e()}var n=x.length;x.forEach(function(e){e.clear(t)})},getOptIn:function(t){function n(e){0===--i&&t(e)}var i=x.length;x.forEach(function(e){e.getOptIn(n)})}},{detectUserId:function(t){var n;!0===e.userManager||!(e.userManager=!0)===c.hasConsent()||U.ivbsIdLess?t&&t():(n=!1,U.setTimeout(function(){n||(B.warn("IVBS: Cookie mechanism timeout/error."),t())},1e3),!1!==c.knowsConsent()?H.getId(function(e){n=!0,N=_.id=e.id,B.info("IVBS: CDid="+N),t()}):H.getOptIn(function(e){n=!0,null!=e&&null!=e.Data&&e.Data.OptIn<0&&c.setNoCookies(),t&&t()}))},clear:function(e){H.clear(e),N=null,_.id&&delete _.id},get id(){return N||_.id}}),F=(j=function(e){return{"invibes.adDiv.getBoundingClientRect\\(\\)":'invibes.IntegrationManager.getBoundingClientRect(invibes.adManagers["'+e+'"].adDiv)',"invibes.adDiv":'invibes.adManagers["'+e+'"].adDiv',"invibes.currentAd":'invibes.adManagers["'+e+'"].currentAd',"invibes.initializeAllOutgoingLinks":'invibes.adManagers["'+e+'"].initializeAllOutgoingLinks',"invibes.getClientVerticalVisibilityPercent":"invibes.IntegrationManager.getVerticalVisibilityPercent","window.innerHeight":"invibes.IntegrationManager.windowHeight","invibes.addVideoTracking":'invibes.adManagers["'+e+'"].addVideoTracking','invibes.addEventListener\\("view"':'invibes.adManagers["'+e+'"].addEventListener("view"','invibes.addEventListener\\("beforeEngagement"':'invibes.adManagers["'+e+'"].addEventListener("beforeEngagement"'}},{getDocumentLocation:function(){return ne.locationHref.substring(0,300).split(/[?#]/)[0]},extractHostname:function(e){return null==e?"":(-1<e.indexOf("//")?e.split("/")[2]:e.split("/")[0]).split(":")[0].split("?")[0]},setLocation:function(e){top.window.location=e},isDocumentReady:function(){return/complete|loaded|interactive/.test(M.readyState)},addQueryStringParam:Pe,addParamsToUrl:Se,parseQueryStringParams:function(e){e=e||U.location.href;var t={};try{t=JSON.parse(localStorage.ivbs)}catch(e){}for(var n,i=/[\\?&]([^=]+)=([^\\?&#]+)/g;null!=(n=i.exec(e));)n.index===i.lastIndex&&i.lastIndex++,t[n[1].toLowerCase()]=n[2];return t},generateRandomId:we,generateUserId:function(){function e(){return Math.floor(Math.random()*t).toString(36)}var t=parseInt("zzzzzz",36);return e()+e()},replaceTimestamp:function(e){return null==e?e:e.replace(/\[timestamp\]/g,(new Date).getTime())},jsonpWithParams:function(e,t,n){var i;e=Se(e,t),t=n,n="cb_"+we(),(i=M.createElement("script")).src=Pe(e,"callback","invibes."+n),_[n]=t||o,M.head.appendChild(i)},pixel:function(n,i){var r=new Image;return new Promise(function(e,t){r.addEventListener("load",e),r.addEventListener("error",t),r.src=Se(n,i)})},setInnerHtmlWithScripts:function(e,t,n,i){e.innerHTML=t;function r(e){var t=e.shift();t?(t.parent.appendChild(t.script),t.script.src?t.script.onload=function(){r(e)}:r(e)):n&&n()}var t=e.querySelectorAll("script"),o=[];Array.prototype.forEach.call(t,function(t){var e=t.parentElement,n=(e.removeChild(t),M.createElement("script"));"id|type|src|textContent".split("|").forEach(function(e){t[e]&&(n[e]=t[e])}),null!=i&&(n.setAttribute(_divAttributeName,i),n.textContent=Le(n.textContent,i)),o.push({script:n,parent:e})}),r(o)},addScript:function(e,t,n){var i=M.createElement("script");i.type="text/javascript",null!=n&&(t=Le(t,n)),i.setAttribute(_divAttributeName,n),i.text=t,e.appendChild(i)},cloneObj:function(t){var n={};return Object.keys(t).filter(function(e){return t.hasOwnProperty(e)}).forEach(function(e){n[e]=t[e]}),n}}),se=(!function(){function i(){}function o(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)}function r(n,i){for(;3===n._state;)n=n._value;return 0===n._state?void n._deferreds.push(i):(n._handled=!0,void o._immediateFn(function(){var e,t=1===n._state?i.onFulfilled:i.onRejected;if(null!==t){try{e=t(n._value)}catch(e){return void a(i.promise,e)}s(i.promise,e)}else(1===n._state?s:a)(i.promise,n._value)}))}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void d(t);if("function"==typeof n)return void u((i=n,r=e,function(){i.apply(r,arguments)}),t)}t._state=1,t._value=e,d(t)}catch(e){a(t,e)}var i,r}function a(e,t){e._state=2,e._value=t,d(e)}function d(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)r(e,e._deferreds[t]);e._deferreds=null}function c(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function u(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,a(t,e))})}catch(e){if(n)return;n=!0,a(t,e)}}var e,t;e=this,t=setTimeout,o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var n=new this.constructor(i);return r(this,new c(e,t,n)),n},o.all=function(e){var a=Array.prototype.slice.call(e);return new o(function(r,o){if(0===a.length)return r([]);for(var s=a.length,e=0;e<a.length;e++)!function t(n,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var i=e.then;if("function"==typeof i)return i.call(e,function(e){t(n,e)},o),0}a[n]=e,0==--s&&r(a)}catch(e){o(e)}}(e,a[e])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(n){return new o(function(e,t){t(n)})},o.race=function(r){return new o(function(e,t){for(var n=0,i=r.length;n<i;n++)r[n].then(e,t)})},o._immediateFn="function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){t(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},o._setImmediateFn=function(e){o._immediateFn=e},o._setUnhandledRejectionFn=function(e){o._unhandledRejectionFn=e},"undefined"!=typeof module&&module.exports?module.exports=o:e.Promise||(e.Promise=o),Array.prototype.findIndex||(Array.prototype.findIndex=function(e){for(var t=0;t<this.length;t++)if(e(this[t]))return t}),navigator.userAgent.match(/MSIE |Trident/i)&&(EventClass=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=M.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n},EventClass.prototype=U.Event.prototype)}(),{sendPageViewEvent:function(){s.sentPageView||(s.sentPageView=!0,Ae("/Stat/PvPixel",null,null,null))},sendFallbackPresent:function(e){Ae("/statPixel",e?-1041:-41,s.PageId)},sendStatwebStats:function(e,t,n){Ae("/statPixel",e,t,n)}}),t=(W=null,q=function(){return null!=W||(null==(W=a.getCookie("ivbspd"))?W=0:W++),W},Q=function(t){return new Promise(function(e){U.setTimeout(function(){e()},t)})},G=function(e){var t=null;switch(e){case 2:t=!0;break;case 3:t=!1}if(null!==t){for(var n=0;n<_.purposes.length;n++)_.purposes[n]=t;c.updateConsent(1==t?1:0)}},{startAnalytics:function(){var n=F.parseQueryStringParams();z=new r(n),_.widgetStats=z,(new Ve).start(),(new Te).start(),ke().then(function(){a.setCookie("ivbspd",q(),0);t=n;var e,t=0!=(e=Object.keys(t).filter(function(e){return-1<e.indexOf("utm")})).length?(e.sort(),t[e[0]]):null;se.sendStatwebStats(5,t||"-"),null!=n.ivwdg&&void 0!==ae&&new ae(z,n.ivwdg).run()})}}),ae=function(e,t){function n(){B.info("widget html added to page"),_.dispatchEvent("ivbsWidgetRendered"),c(_.monitoredDiv),d(_.monitoredDiv),u()}function i(t){var e;null!=t&&((_.sewebResult=t).AdvertiserFormattingHtml?(e=M.createElement("div"),M.body.appendChild(e),F.setInnerHtmlWithScripts(e,t.AdvertiserFormattingHtml)):B.warn("There is no Advertiser Formatting Html to display"),new Promise(function(e,t){var n,i="Widget container not found",r=M.getElementById(o);r?e(r):F.isDocumentReady()?t(i):n=U.setInterval(function(){F.isDocumentReady()&&(U.clearInterval(n),(r=M.getElementById(o))?e(r):t(i))},100)}).then(function(e){r=e,t.WidgetHtml?F.setInnerHtmlWithScripts(e,t.WidgetHtml,n):B.warn("There is no Widget Html to display")}).catch(function(e){B.error("Widget cannot be rendered in "+o+" : "+e)}))}var r,o="divIvbsWidget",s=e,a=t,d=function(e){de({target:e||r,checkpoints:[95],useVisiApi:!0,onCheckpointReached:function(e,t){s.sendUserVideoEvent(3600,t)}})},c=function(e){function t(e,t,n,i,r){e&&de({target:e,duration:n,continuous:r,checkpoints:[i],onCheckpointReached:function(){s.sendUserVideoEvent(t)}})}t(e=e||r,3601,1e3,50,!0),t(e,3602,2e3,50,!0)},u=function(){var e=_.isTablet?901:900,t=_.isTablet?904:903,n=!1;_.handleAdSwipe=function(){s.sendUserVideoEvent(n?t:e),_.dispatchEvent(n?"firstSwipe":"swipe"),n=!0}};return{run:function(){F.jsonpWithParams(l.sewebUrl+"/Analytics",{t:a},i)}}},de=function(t){function o(t){Object.keys(d).filter(function(e){return e<=t}).forEach(function(e){d[e].disable(),delete d[e]})}function s(){var e;c.length&&(e=c[c.length-1],t.onCheckpointReached.call(null,e.checkpointPercent,e.totalDuration),c=[])}function n(e){var n,i,r=e?-1:ne.getVerticalVisibilityPercent(t.target);Object.keys(d).forEach(function(e){var t=d[e];t.update(r),t.done&&(n=e,i=t.totalDuration)}),-1<n&&(e=parseInt(n,10),a&&U.clearTimeout(a),o(n),0<t.debounceRate&&0<Object.keys(d).length?(c.push({checkpointPercent:e,totalDuration:i}),a=U.setTimeout(s,t.debounceRate)):t.onCheckpointReached.call(null,e,i))}function e(){_.visibilityAPI.isVisible()?n():n(!0)}var a,d={},c=[],i=1==t.useVisiApi&&null!=_.visibilityAPI;return t.checkpoints.sort().forEach(function(e){d[e]=new Oe(e,t,n)}),_.addEventListener("scrollresize",n),i&&M.addEventListener(_.visibilityAPI.eventName,e),n(),{stop:function(){_.removeEventListener("scrollresize",n),o(101),i&&M.removeEventListener(_.visibilityAPI.eventName,e)}}};_.OverlaySwiper=function(t){function n(){r.classList.contains("ivbsMinimised")||(_.widgetStats.sendUserVideoEvent(3610),r.classList.add("ivbsMinimised"),t.update(100),t.startAutoplay())}function i(e){e.stopPropagation(),e.preventDefault(),r.classList.contains("ivbsMinimised")&&(_.widgetStats.sendUserVideoEvent(3611),r.classList.remove("ivbsMinimised"),t.update(100),t.stopAutoplay())}var r=M.getElementById("ivbsWidgetContainer"),e=r.querySelector(".ivbsPageOverlay"),o=r.querySelector(".ivbsCloseIcon"),s=r.querySelector(".iv-swiper-container"),a=r.querySelector(".ivbsExpandIcon"),d=(t.stopAutoplay(),o.addEventListener("click",function(){d()}),function(){r.classList.contains("ivbsMinimised")?(r.style.display="none",_.widgetStats.sendUserVideoEvent(3612)):n()});s.addEventListener("click",function(e){i(e)}),a.addEventListener("click",function(e){i(e)}),e.addEventListener("click",function(){n()}),setTimeout(function(){U.addEventListener("scroll",function(e){n()})},1500)},_.trySendPuid=function(t){t&&"function"==typeof t&&te.add(function(){var e=t();null!=e&&("string"==typeof e||e instanceof String)&&""!=e&&(s.dom.graduate(),se.sendStatwebStats(11010,e))},"purpose1")},_.trySendHash=function(t){t&&"function"==typeof t&&te.add(function(){var e=t();null!=e&&("string"==typeof e||e instanceof String)&&""!=e&&(s.dom.graduate(),se.sendStatwebStats(11014,e))},"purpose1")},_.getCookie=a.getCookie,(_.VideoQuartileReporter=function(d){(d=d||{}).tolerance=d.tolerance||3;var c=this,u=0;this.videoElement=d.videoElement,this.checkpoints=d.checkpoints||[0,25,50,75,99],d.report=d.report||function(e){d.adManager.sendUserVideoEventId(3700+e,d.videoElement.src)},this.handleTimerEvents=function(){var e=c.videoElement.currentTime,t=d.duration||parseInt(c.videoElement.getAttribute("data-qduration"))||c.videoElement.duration;if(!isNaN(t)){for(var n,i=Re(e)+" / "+Re(t),r=(c.videoElement.__currentTimeString!==i&&d.adManager&&((n=d.adManager.adDiv.getElementsByClassName("ivbsTimerPlaceholder"))&&n.length&&(n[0].innerHTML=i),c.videoElement.__currentTimeString=i),Math.floor(100*e/t)),o=-1,s=0;s<c.checkpoints.length;s++){var a=c.checkpoints[s];if(!(a<u)){if(a>=r+d.tolerance)break;o=s}}0<=o&&(n=c.checkpoints[o],c.checkpoints.splice(o,1),d.report(n)),u=r}},this.videoElement.addEventListener("timeupdate",this.handleTimerEvents)}).prototype.destroy=function(){this.videoElement.removeEventListener("timeupdate",this.handleTimerEvents)},(_.VideoCheckpointReporter=function(t){var n=this;n.active=!0,n.videoElement=t.videoElement,t.report=t.report||function(){t.adManager.stats.sendUserVideoEventId(t.eventType,t.videoId)},n.handleTimerEvents=function(){var e=n.videoElement.currentTime;e>=t.checkPoint&&n.active&&(n.active=!1,B.logWithTimestamp("send event options.eventType at "+e),n.videoElement.removeEventListener("timeupdate",n.handleTimerEvents),t.report())},n.videoElement.addEventListener("timeupdate",n.handleTimerEvents)}).prototype.destroy=function(){this.videoElement.removeEventListener("timeupdate",this.handleTimerEvents)},(U.invibes=U.invibes||{}).InlinePlayer=(J="undefined"==typeof Symbol?function(e){return"@"+(e||"@")+Math.random()}:Symbol,Z=/iPhone|iPod|iPad/i.test(navigator.userAgent),K=J(),$=J(),X=J("nativeplay"),Y=J("nativepause"),(ee=[]).i=0,He.isWhitelisted=Z,function(e,t){t&&e.setAttribute("src",t);t=null===e.getAttribute("muted");return Z&&He(e,t),{videoElement:e,play:function(){return this.videoElement.play()},pause:function(){return this.videoElement.pause()},isPaused:function(){return this.videoElement.paused},isMuted:function(){return this.videoElement.muted},mute:function(){this.videoElement.muted=!0,this.videoElement.volume=0},unmute:function(){this.videoElement.muted=!1,this.videoElement.volume=1},toggleSound:function(){this.isMuted()?this.unmute():this.mute()}}});_.Play=_.FullPlay=function(d){function s(){var e,t;P&&(P=!1,B.debug("IVBS: IPlay heated"),I&&D(),o()),i&&u.currentAd.ElementIABDuration<=c.currentTime&&(d.visiPercent=u.currentAd.MinVideoVisiPercentToPlay,i=!1,o()),c.currentTime>=E&&!b&&(b=!0,u.stats.sendUserVideoEventId(1e3),w&&!i&&(d.forever=!0,R())),!r||(e=Object.keys(r)[0])&&(t=parseInt(e),c.currentTime>=t&&(r[e](),u.stats.sendUserVideoEventId(1400,t),delete r[e]))}function a(){m&&m.destroy(),g&&g.destroy(),f&&f.destroy(),t.isPaused()||t.pause(),clearTimeout(p),_.removeEventListener("scrollresize",playInstance.scrollResizeHandler),U.removeEventListener("touchend",playInstance.scrollResizeHandler),r=null,L.forEach(function(e){e()})}var v,t,c,p,f,m,g,h,b,y,n=this,u=(ce(n),d.adManager||(d.video,v=new Promise(function(e){_resolvePlayReadyPromise=e}),(e={get playReadyPromise(){return v},resolvePlayPromise:_resolvePlayReadyPromise}).adDiv=M.getElementById("ivbsWidgetContainer"),e.currentAd={},e.stats={},e.stats.sendUserVideoEventId=function(e,t){_.widgetStats.sendUserVideoEvent(e,t)},ce(e),e)),l=d.video,I=d.forcedPause||!1,E=u.currentAd.VideoCompletionTime,C=u.currentAd.VideoDurationInvoiceBase,w=u.currentAd.PlayVAfterC,i=u.currentAd.PlayVOnIabSettings,r=null,P=(d.topMargin=d.topMargin||0,d.bottomMargin=d.bottomMargin||0,d.visiPercent=u.currentAd.MinVideoVisiPercentToPlay||d.visiPercent||0,i&&(d.visiPercent=u.currentAd.ElementIABPercent||0),d.forever=1==u.currentAd.PlayForeverAfterView||d.forever,!0),S=!1,L=(l.volume=0,l.muted=!0,l.setAttribute("playsinline",""),[]),A=function(e,t,n){e.addEventListener(t,n),L.push(function(){e.removeEventListener(t,n)})},V=function(t){F.pixel(t).catch(function(e){B.info("IVBS: error loading pixel with url "+t+"because of "+e)})},T=function(){k(),h&&h()},k=function(){null==m&&(m=new _.VideoQuartileReporter({videoElement:c,adManager:u,report:function(e){var t=d.id||c.getAttribute("data-ivVidId")||c.getAttribute("src");B.log(["IVBS: QUARTILE",t,e]),u.stats.sendUserVideoEventId(3700+e,"bv_"+t)}})),null==g&&C&&(g=new _.VideoQuartileReporter({duration:C,adManager:u,videoElement:c,report:function(e){var t=d.id||c.getAttribute("data-ivVidId")||c.getAttribute("src");B.log(["IVBS: inv QUARTILE",t,e]),u.stats.sendUserVideoEventId(1500+e,"bv_"+t)}})),null==y&&(y=new _.VideoCheckpointReporter({videoId:"bv_"+(d.id||c.getAttribute("data-ivVidId")||c.getAttribute("src")),adManager:u,videoElement:c,checkPoint:6,eventType:3706}))},e=new Promise(function(s){var a,t,e=d.vastUrl||d.vpaidUrl;e?(e=F.replaceTimestamp(e),(a=new _.VastParser(e)).initialize(function(){d.vpaidUrl?new _.VPAIDPlayer((t={video:l,fileSettings:a.vpaidFile,params:a.adParams,eventHandler:u.stats.sendUserVideoEventId,vpaidHasRedirect:void 0!==d.vpaidHasRedirect&&d.vpaidHasRedirect,noLoop:d.noLoop,indexVideoOnFinish:d.indexVideoOnFinish,adManager:u},d.vpaidConfig&&"object"==typeof d.vpaidConfig&&Object.keys(d.vpaidConfig).forEach(function(e){d.vpaidConfig.hasOwnProperty(e)&&(t[e]=d.vpaidConfig[e])}),t)).then(function(e){P=!1,s({player:e,video:e.timedVideo})}):(l.setAttribute("src",a.mediaFile.src),s({player:new _.InlinePlayer(l),video:l}));var t,e,n=!1,i=(h=function(){if(!n&&a.impressionUrls){for(var e=0;e<a.impressionUrls.length;e++)V(a.impressionUrls[e]);n=!0}var i;i=a.quartiles,null==f&&(f=new _.VideoQuartileReporter({videoElement:c,adManager:u,report:function(e){var t=i[e];if(t)for(var n=0;n<t.length;n++)V(t[n])},checkpoints:Object.getOwnPropertyNames(i)}))},a.clickThroughUrl);if(i&&(!d.vastRedirectLinkId||(e=M.getElementById(d.vastRedirectLinkId))&&"A"===e.nodeName&&u.initializeOutgoingLink(e,i),d.vastRedirectLinkClass)){var r=u.adDiv.getElementsByClassName(d.vastRedirectLinkClass);if(null!=r&&0<r.length)for(var o=0;o<r.length;o++)r[o]&&"A"===r[o].nodeName&&u.initializeOutgoingLink(r[o],i)}u.addClickTrackers(a.clickTrackingUrls)})):(t=new _.InlinePlayer(l),l.readyState===HTMLMediaElement.HAVE_ENOUGH_DATA||/iPhone|iPod|iPad/i.test(navigator.userAgent)?s({player:t,video:l}):l.addEventListener("loadeddata",function e(){l.removeEventListener("loadeddata",e),s({player:t,video:l})}))}),O=function(){var e=d.inViewTarget||l,e=(l&&1==u.currentAd.IABVisiAppliesToEntireAd&&(e=u.adDiv),ne.getBoundingClientRect(e));if(e.height<1||e.width<1)return!1;if(l.forcedVisibilityPercent>=d.visiPercent)return!0;var t=Math.ceil((100-d.visiPercent)*e.height/100),n=_.headerHeight+d.topMargin-t,t=ne.windowHeight-_.footerHeight-d.bottomMargin+t;return e.top>=n&&e.bottom<=t},R=function(){null==t||I||(T(),t.isPaused()&&(B.debug("IVBS: IPlay started"),t.play()))},D=function(){t.isPaused()||(B.debug("IVBS: IPlay paused"),t.pause())},x=function(){var e;P||((e=O())&&(S=!0,R()),t.isPaused()||e||(d.forever||d.playOnView)&&S&&!i||D())},o=function(){clearTimeout(p),p=setTimeout(function(){x()},150),x()};return(n.playerReadyPromise=e).then(function(e){t=e.player,c=e.video,d.toggleMuteBtn&&(e=new _.ToggleMute({player:t,adManager:u,container:l.parentElement,toggleMuteBtn:d.toggleMuteBtn}),n.mute=e.mute,n.unmute=e.unmute,e.addEventListener("mute",function(){n.dispatchEvent("mute")}),e.addEventListener("unmute",function(){n.dispatchEvent("unmute")})),d.fullscreen&&(d.fullscreen.adManager=u,new _.Fullscreen(n,d.fullscreen).init()),d.draggable&&(d.draggable.adManager=u,new _.Draggable(n,d.draggable).init()),d.noLoop||null!=d.vpaidUrl||A(l,"ended",function(){l.currentTime=0,l.play()}),d.picAfterPlay&&(d.picAfterPlayTime?c.addEventListener("timeupdate",function(){c.currentTime>d.picAfterPlayTime&&u.adDiv.classList.add("ivbsVideoEnded")}):A(c,"ended",function(){u.adDiv.classList.add("ivbsVideoEnded")})),A(c,"timeupdate",s),_.addEventListener("scrollresize",o),U.addEventListener("touchend",o),u.addEventListener("beforeEngagement",a),u.resolvePlayPromise(n),null!=d.vpaidUrl&&!d.heatupVideo||(e=t.play())&&e.then(function(){o()}).catch(function(e){B.warn("IVBS: "+e)}),d.playOnView&&(e=function(){S=!0,R()},u.viewed?e():u.addEventListener("view",e)),o()}),n.getPlayer=function(){return t},n.destroy=a,n.addVideoTracking=function(e){(r=null==r?{}:r)[e.time]=e.tracking},n.forcePause=function(){I=!0,D()},n.resume=function(){I=!1,o()},n},_.ToggleMute=function(e){var t,n=this,i=e.toggleMuteBtn,r=e.player,o=e.adManager,s=e.container,a="ivbsToggleMute",d="ivbsToggleUnmute",c=(ce(n),n.unmute=function(){o.videoZoomed=!0,o.stats.sendUserVideoEventId(t?3621:3620),t=!0,r.unmute(),i.classList.remove(a),i.classList.add(d),s.classList.add("ivFlashyMaxi"),"function"==typeof r.resize&&r.resize(),this.dispatchEvent("unmute")},n.mute=function(){delete o.videoZoomed,r.mute(),i.classList.add(a),i.classList.remove(d),s.classList.remove("ivFlashyMaxi"),"function"==typeof r.resize&&r.resize(),this.dispatchEvent("mute")},n.destroy=function(){i.removeEventListener("click",c),_.visibilityAPI&&M.removeEventListener(_.visibilityAPI.eventName,muteIfPageNotVisible)},function(e){e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),r&&(o.videoZoomed?n.mute():n.unmute())});i.classList.add(a),i.addEventListener("click",c),_.visibilityAPI&&M.addEventListener(_.visibilityAPI.eventName,function(){_.visibilityAPI.isVisible()||n.mute()})},_.OverlayPlayer=function(e){var t,n=M.getElementById("ivbsWidgetContainer"),i=n.querySelector(".ivbsPageOverlay"),r=n.querySelector(".ivbsCloseIcon"),o=n.querySelector(".ivbsVideoContainer"),s=(r.addEventListener("click",function(e){s(e)}),function(e){e.preventDefault(),e.stopPropagation(),n.classList.contains("ivbsMinimised")?(_.widgetStats.sendUserVideoEvent(3612),t.forcePause(),n.style.display="none"):(_.widgetStats.sendUserVideoEvent(3610),n.classList.add("ivbsMinimised"),t.mute())});i.addEventListener("click",function(){n.classList.contains("ivbsMinimised")||(_.widgetStats.sendUserVideoEvent(3610),n.classList.add("ivbsMinimised"),t.mute())}),o.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),n.classList.contains("ivbsMinimised")?(_.widgetStats.sendUserVideoEvent(3611),n.classList.remove("ivbsMinimised"),t.unmute()):(_.widgetStats.sendUserVideoEvent(3610),n.classList.add("ivbsMinimised"),t.mute())}),setTimeout(function(){t=new _.FullPlay(e),U.addEventListener("scroll",function(e){n.classList.contains("ivbsMinimised")||(_.widgetStats.sendUserVideoEvent(3610),n.classList.add("ivbsMinimised"),t.mute())})},1500)},_.VoteAndSurf=function(e){var t=M.getElementById("ivbsWidgetContainer"),n=M.querySelector(".ivbsLiveResultsContainer"),i=M.querySelector(".ivbsVotesNr");_.sewebResult.BvOptVotes.opt1||(_.sewebResult.BvOptVotes.opt1=0),_.sewebResult.BvOptVotes.opt2||(_.sewebResult.BvOptVotes.opt2=0);var r=function(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&(n+=parseFloat(e[t]));return n}(_.sewebResult.BvOptVotes),t=(i.innerHTML=r,_.sewebResult.BvOptVotes.opt1>_.sewebResult.BvOptVotes.opt2?t.classList.add("ivbs-result-option1"):_.sewebResult.BvOptVotes.opt1<_.sewebResult.BvOptVotes.opt2?t.classList.add("ivbs-result-option2"):_.sewebResult.BvOptVotes.opt1===_.sewebResult.BvOptVotes.opt2&&t.classList.add("ivbs-result-option1"),i=r<=e.minVotesNr?(n.style.display="none",{min:0,callback:function(e){return(e/r*100).toFixed(0)+"%"},padding:0,fontFamily:e.xAxesFontFamily,fontStyle:e.xAxesFontStyle,fontColor:e.xAxesFontColor}):{min:0,userCallback:function(e,t,n){if(Math.floor(e)===e)return e},padding:0,fontFamily:e.xAxesFontFamily,fontStyle:e.xAxesFontStyle,fontColor:e.xAxesFontColor},M.getElementById("myChart"));new Chart(t,{type:"horizontalBar",data:{labels:e.labels,datasets:[{label:e.datasetLabel,data:e.data,backgroundColor:e.bgColors,barThickness:e.barThickness}]},options:{tooltips:{enabled:!1},hover:{mode:null},responsive:e.responsive,maintainAspectRatio:e.maintainAspectRatio,scales:{yAxes:[{gridLines:e.yAxesGridLines,ticks:{beginAtZero:!0,padding:10,fontFamily:e.yAxesFontFamily,fontStyle:e.yAxesFontStyle,fontColor:e.yAxesFontColor}}],xAxes:[{gridLines:e.xAxesGridLines,ticks:i}]},layout:e.layout,legend:e.legend}})},t.startAnalytics()}function ce(o){var s={};o.triggeredEvents=o.triggeredEvents||{},o.addEventListener=function(e,t){t.constructor===Function&&(s[e]=s[e]||[],s[e].push(t))},o.addEventListenerReactive=function(e,t){if(t.constructor===Function){if(o.triggeredEvents[e])return t();s[e]=s[e]||[],s[e].push(t)}},o.removeEventListener=function(e,t){e=s[e]||[],t=e.indexOf(t);-1<t&&e.splice(t,1)},o.dispatchEvent=function(e,t,n){o.triggeredEvents[e]=!0;var i,r=(s[e]||[]).slice(0);for(i in r)if(r.hasOwnProperty(i))try{r[i].apply(t,n||[])}catch(e){B.error(e)}}}function ue(e){for(var t,n,i=M.cookie.split(";"),r=0;r<i.length;r++)if(t=i[r].substr(0,i[r].indexOf("=")),n=i[r].substr(i[r].indexOf("=")+1),(t=t.replace(/^\s+|\s+$/g,""))===e)return unescape(n)}function le(n,i,r,o){te.add(function(){var e,t;c&&c.noCookies&&!("IvbsCampIdsLocal"==n||n==p)&&0<=(r||0)||(365<r&&(r=365),o=o||f.cookieDomain,e=new Date,t=24*r*60*60*1e3,e.setTime(e.getTime()+t),t=i+(r?"; expires="+e.toUTCString():""),ne.integrationType===u.Script&&"ivbsdid"!=n||(t+=";samesite=none",-1<U.location.protocol.indexOf("https")&&(t+=";secure")),t+=";domain="+o+";path=/",M.cookie=n+"="+t)},0<=["ivbsdid"].indexOf(n)?"purpose1":0<=["VsLLocal","IvbsCampIdsLocal","ivbsRCC","ivbsRCCS","ivvcap","ivbss","IvbsCampIdsLocal","ivNotCD","ivvbks","ivBlk","ivdtbrk","IvbsCD","IvbsCDS"].indexOf(n)?"special":"purpose")}function ve(t,n,i){te.add(function(){var e;null==i?localStorage.setItem(t,n):((e=new Date).setDate(e.getDate()+i),localStorage.setItem(t,JSON.stringify({value:n,expiration:e.getTime()})))},0<=g.indexOf(t)?"purpose1":0<=m.indexOf(t)?"special":"purpose")}function pe(e){var t=localStorage.getItem(e);try{var n=JSON.parse(t);return null!=n.expiration?(new Date).getTime()<n.expiration?n.value:(fe(e),null):t}catch(e){return t}}function fe(e){U.localStorage.removeItem(e)}function me(e){if(null==e)return consentResponse.NOCALL;if(!e.gdprApplies||e.hasGlobalConsent)return consentResponse.OPTINCALL;var t=I(e);if(t instanceof Array){if(t.length<d)return consentResponse.OPTOUTCALL;for(var n=0;n<d;n++)if(!1===t[n]||"false"===t[n]||null==t[n])return consentResponse.OPTOUTCALL}else{if("object"!=typeof t||null===t)return consentResponse.NOCALL;var i,n=0;for(i in t){if(n===d)break;if(t.hasOwnProperty(i)&&(n++,!1===t[i]||"false"===t[i]||null==t[i]))return consentResponse.OPTOUTCALL}if(n<d)return consentResponse.OPTOUTCALL}return null==(e=E(e))?consentResponse.OPTINCALL:null==e[h]?consentResponse.NOCALL:1!=e[h]?consentResponse.OPTOUTCALL:consentResponse.OPTINCALL}function ge(e,t){var n=A(e);0<n&&T(n),e&&(s.gdpr_applies=e.gdprApplies,s.gdpr_isProcessed=t,V(e),T(n))}function he(){"IvbsCampIdsLocal|VSVASuspended|ivNotCD|VsLLocal|ivbss|ivbsdid|ivBlk|ivvbks|ivdtbrk|ivbsIL|ivSkipLoad|ivbspd".split("|").forEach(function(e){a.setCookie(e,"",-1)}),"ivbsdid|IvbsCDS|IvbsCampIdsLocal|ivSkipLoad|ivbspd".split("|").forEach(function(e){ie.removeKey(e)})}function be(){he(),i=0,b=1}function ye(e){var t={},n=e.querySelector('[id="ivUserEmail"]');return n&&n.value?(n=Ie(n.value,"email"),n=sjcl.codec.hex.fromBits(sjcl.hash.sha256.hash(n)).toUpperCase(),t.hashedEmail=n):(n=e.querySelector('[id="ivUserPhone"]'))&&n.value&&(e=Ie(n.value,"phone"),n=sjcl.codec.hex.fromBits(sjcl.hash.sha256.hash(e)).toUpperCase(),t.hashedPhone=n),t.cpi=v.cpi,M.referrer&&(t.referrer=M.referrer.substring(0,300).split(/[?#]/)[0]),t}function Ie(e,t){return e=e.trim(),"phone"===t?e=(e=e.replace("+","00")).replace(/[^0-9]/g,""):"email"===t&&(e=e.replace(/\s\r\n\t]/g,"")),e}function Ee(e){b&&he(),I=function(e){return null!=e.purpose?e.purpose.consents:{}},E=function(e){return null!=e.vendor?e.vendor.consents:{}},S=function(e){return null!=e.vendor?e.vendor.legitimateInterests:{}},w=function(e){return null!=e.purpose?e.purpose.legitimateInterests:{}},e&&(C=function(e){return null!=e.tcString?e.tcString:""})}function Ce(t,n){try{var e;t?(e={gdprApplies:t.GdprApplies,tcString:t.TcString,purpose:{consents:t.PurposeConsents,legitimateInterests:t.PurposeLegitimateInterests},vendor:{consents:t.VendorConsents,legitimateInterests:t.VendorLegitimateInterests}},Ee(!0),P=d=10,ge(e,!0),n()):null!=U.__tcfapi?(Ee(!0),P=d=10,U.__tcfapi("getTCData",2,function(e){null!=e?(ge(e,!0),n()):L<5&&(L++,setTimeout(function(){Ce(t,n)},500))},[436])):(U.context&&U.context.initialConsentValue?(e={gdprApplies:!0,tcString:U.context.initialConsentValue,purpose:{consents:{},legitimateInterests:{}},vendor:{consents:{},legitimateInterests:{}}},Ee(!0),ge(e,!(P=d=10))):U.context&&U.context.consentSharedData&&U.context.consentSharedData.consentString?(e={gdprApplies:!0,tcString:U.context.consentSharedData.consentString,purpose:{consents:{},legitimateInterests:{}},vendor:{consents:{},legitimateInterests:{}}},Ee(!0),ge(e,!(P=d=10))):U.ivbsAmpConsentString&&(e={gdprApplies:!0,tcString:U.ivbsAmpConsentString,purpose:{consents:{},legitimateInterests:{}},vendor:{consents:{},legitimateInterests:{}}},Ee(!0),ge(e,!(P=d=10))),n())}catch(e){B.error("IVBS: "+e),n()}}function we(){return Math.round(1e12*Math.random()).toString(36).substring(0,10)}function Pe(e,t,n){var i=e.indexOf("?")<0?"?":"&";return e+i+t+"="+n}function Se(e,t){var n,i=e;if(t)for(var r in t)t.hasOwnProperty(r)&&(null==(n=t[r])&&(n=""),i=Pe(i,encodeURIComponent(r),encodeURIComponent(n)));return i}function Le(e,t){var n,i,r,o=j(t);for(n in o)o.hasOwnProperty(n)&&(i=new RegExp(""+n,"g"),r=o[n],e=e.replace(i,r));return e}function Ae(e,t,n,i){try{var r,o={location:F.getDocumentLocation(),additionalInfo:n||s.visitId+"|"+(0<c.consent?1:0)};-1<e.indexOf("PvPixel")&&(r="",r=s.dom.gdpr_isProcessed?_.getAcceptedPurposeIds(!1):"{0}",o.additionalInfo+="|"+r,null!=s.dom.gdpr_consent&&(o.Tc=s.dom.gdpr_consent),o.TcNotProc=!s.dom.gdpr_isProcessed),null!=t&&(o.actionType=t),s.dom.id&&(o.lid=s.dom.id),ne.referrer&&(o.referrer=ne.referrer.substring(0,300).split(/[?#]/)[0]),oe.id&&(o.cookie=oe.id),v&&v.cpi&&(o.CPI=v.cpi),F.pixel(l.statwebUrl+e,o).then(i)}catch(e){B.log("IVBS: "+e)}}function Ve(){function e(){var e=(Date.now()-t)/1e3,e=Math.floor(e)+1,e=q()+"|"+e;z.sendUserVideoEvent(1007,e)}var t=Date.now();return{start:function(){U.addEventListener("beforeunload",e)}}}function Te(){function n(){(o=e())&&U.setTimeout(t,1e3*o)}var i=Date&&Date.now?Date.now():0,r=1,o=0,e=function(){return r<=12?2:r<=30?3:r<=45?5:r<=60?15:0},t=function(){r=function(t){try{var e=(Date.now()-i)/1e3;isNaN(e)?t+=o:t=Math.floor(e)+1}catch(e){t+=o}return t}(r);var t,e=q()+"|"+r;Promise.race([(t=500,new Promise(function(e){U.setTimeout(function(){e()},t)})),z.sendUserVideoEvent(1006,e)]).then(n,n)};return{start:function(){t()}}}function ke(){function e(){_.dispatchEvent("scrollresize","poll")}ce(_),s.listenToScroll||(s.listenToScroll=!0,t={start:function(){n||(B.info("IVBS: Scrollpoll start"),n=U.setInterval(e,200))},stop:function(){n&&(B.info("IVBS: Scrollpoll stop"),U.clearInterval(n),n=null)}},i=function(){t.stop(),_.dispatchEvent("scroll"),_.dispatchEvent("scrollresize","scroll")},r=U,o&&o.removeEventListener("scroll",i),o!==r&&(o=r,t.start(),o.addEventListener("scroll",i),_.dispatchEvent("scrollParentChanged",_,[r]))),_.videoAdContentResult={PublisherUrlId:0},c.setIvbsConsent(),G(0==l.hasTCF2?2:3),s.dom=_.dom=new re;var t,n,i,r,o=c.hasConsent()?0:2e3;return Promise.race([c.iabConsentPromise(),Q(o)]).then(function(){var e;return s.userIdPromise=s.userIdPromise=new Promise(function(e){oe.detectUserId(e)}),_.optIn=c.consent,te.set(!0),c.hasConsent()&&!_.dom.id&&1==_.purposes[0]&&(e=_.Uid.generate(),ie.setValue("ivbsdid",e),a.setCookie("ivbsdid",JSON.stringify({id:e}),365),_.dom.id=e),s.userIdPromise}).catch(function(e){B.warn("IVBS: Error in promise chain",e),resolve()})}function Oe(i,r,o){function s(){a&&U.clearTimeout(a)}function e(){t(),v=!0,o()}var a,d=!1,c=0,u=0,l=(new Date).getTime(),v=!1,p=r.duration||99999,t=function(){U.removeEventListener("beforeunload",e),U.removeEventListener("pagehide",e)};return null!=r.duration&&0!=r.duration||(U.addEventListener("beforeunload",e),U.addEventListener("pagehide",e)),{get done(){return d},get totalDuration(){return Math.round(c/100)/10},get targetPercent(){return i},update:function(e){if(s(),!d){var t,n=(new Date).getTime();if(i<=u){if(p<=(c+=n-l))return void(d=1)}else r.continuous&&(c=0);1!=v?(i<=e&&(t=p-c,a=U.setTimeout(o,t)),l=n,u=e):d=1}},disable:function(){s(),t()}}}function Re(e){return Math.floor(e/60)+":"+("0"+Math.floor(e)%60).slice(-2)}function De(t){var n=void 0,i=void 0;function r(e){n=requestAnimationFrame(r),t(e-(i||e)),i=e}this.start=function(){n||r(0)},this.stop=function(){cancelAnimationFrame(n),n=null,i=0}}function xe(t,e,n,i){function r(e){Boolean(t[n])===Boolean(i)&&e.stopImmediatePropagation(),delete t[n]}return t.addEventListener(e,r,!1),1}function Ue(e,t,n,i){function r(e){n[t]=e}i&&r(e[t]),Object.defineProperty(e,t,{get:function(){return n[t]},set:r})}function Me(e,t,n){(ee.tue||0)+200<Date.now()&&(e[$]=!0,ee.tue=Date.now()),n||(e.currentTime=t),ee[++ee.i%3]=100*t|0}function _e(e){return e.driver.currentTime>=e.video.duration}function Be(){var e=this,t=e[K];e.webkitDisplayingFullscreen?e[X]():("data:"!==t.driver.src&&t.driver.src!==e.src&&(Me(e,0,!0),t.driver.src=e.src),e.paused&&(t.paused=!1,e.buffered.length||e.load(),t.driver.play(),t.updater.start(),e.dispatchEvent(new Event("play")),e.dispatchEvent(new Event("playing"))))}function Fe(e){var t=this,n=t[K];n.driver.pause(),n.updater.stop(),t.webkitDisplayingFullscreen&&t[Y](),n.paused&&!e||(n.paused=!0,t.dispatchEvent(new Event("pause")),t.ended&&(t[$]=!0,t.dispatchEvent(new Event("ended"))))}function Ne(t){var e,n,i=t[K]={paused:!0,hasAudio:!0};i.video=t,i.updater=new De(function(e){var t=this;t.video.readyState>=t.video.HAVE_FUTURE_DATA?(t.hasAudio||(t.driver.currentTime=t.video.currentTime+e*t.video.playbackRate/1e3,t.video.loop&&_e(t)&&(t.driver.currentTime=0)),Me(t.video,t.driver.currentTime)):t.video.networkState===t.video.NETWORK_IDLE&&t.video.load(),t.video.ended&&t.video.pause(!0)}.bind(i)),i.driver=(e=t,(n=new Audio).crossOrigin=e.crossOrigin,n.src=e.src||e.currentSrc||"data:",n),t.addEventListener("emptied",function(){var e=!i.driver.src||"data:"===i.driver.src;i.driver.src&&i.driver.src!==t.src&&(Me(t,0,!0),i.driver.src=t.src,e?i.driver.play():i.updater.stop())},!1),t.addEventListener("webkitbeginfullscreen",function(){t.paused?i.driver.buffered.length||i.driver.load():(t.pause(),t[X]())}),t.addEventListener("webkitendfullscreen",function(){i.driver.currentTime=t.currentTime}),t.addEventListener("seeking",function(){ee.indexOf(100*t.currentTime|0)<0&&(i.driver.currentTime=t.currentTime)})}function He(e,t,n){var i;t=void 0===t||t,(n=void 0===n||n)&&!Z||e[K]||(Ne(e),i=(n=e)[K],n[X]=n.play,n[Y]=n.pause,n.play=Be,n.pause=Fe,Ue(n,"paused",i.driver),Ue(n,"muted",i.driver,!0),Ue(n,"playbackRate",i.driver,!0),Ue(n,"ended",i.driver),Ue(n,"loop",i.driver,!0),xe(n,"seeking"),xe(n,"seeked"),xe(n,"timeupdate",$,!1),xe(n,"ended",$,!1),e.classList.add("IIV"),!t&&e.autoplay&&e.play())}}(window,document,window.invibes=window.invibes||{});